<?php
/**
 * Utility functions for NeonPulse Arcade
 */

// Function to get game data
function getGames() {

    return [
        [
            'id' => 1,
            'name' => 'Pac-Man',
            'description' => 'The classic arcade game where you must eat all the dots while avoiding ghosts.',
            'year' => 1980,
            'developer' => 'Namco',
            'image' => 'images/games/pacman.jpg',
            'score' => 999999
        ],
        [
            'id' => 2,
            'name' => 'Space Invaders',
            'description' => 'Defend Earth against waves of aliens with your laser cannon.',
            'year' => 1978,
            'developer' => 'Taito',
            'image' => 'images/games/spaceinvaders.jpg',
            'score' => 878900
        ],
        [
            'id' => 3,
            'name' => 'Tron',
            'description' => 'Based on the cult film, battle your opponents in Light Cycle races.',
            'year' => 1982,
            'developer' => 'Bally Midway',
            'image' => 'images/games/tron.jpg',
            'score' => 750580
        ],
        [
            'id' => 4,
            'name' => 'Donkey Kong',
            'description' => 'Help Mario rescue the princess by avoiding obstacles thrown by the giant ape.',
            'year' => 1981,
            'developer' => 'Nintendo',
            'image' => 'images/games/donkeykong.jpg',
            'score' => 845700
        ],
        [
            'id' => 5,
            'name' => 'Galaga',
            'description' => 'Destroy waves of aliens with your spaceship in this legendary shoot\'em up.',
            'year' => 1981,
            'developer' => 'Namco',
            'image' => 'images/games/galaga.jpg',
            'score' => 967000
        ]
    ];
}

// Function to get high scores
function getHighScores($game = null) {
    // Fictional array of high scores
    $scores = [
        'pacman' => [
            ['rank' => 1, 'player' => 'SynthKid', 'score' => 999999, 'date' => '2025-03-15'],
            ['rank' => 2, 'player' => 'RetroQueen', 'score' => 985600, 'date' => '2025-02-28'],
            ['rank' => 3, 'player' => 'PixelMaster', 'score' => 940800, 'date' => '2025-04-01'],
            ['rank' => 4, 'player' => 'ArcadeKing', 'score' => 925400, 'date' => '2025-03-22'],
            ['rank' => 5, 'player' => 'WaveRider', 'score' => 898700, 'date' => '2025-01-14']
        ],
        'spaceinvaders' => [
            ['rank' => 1, 'player' => 'StarFighter', 'score' => 878900, 'date' => '2025-03-05'],
            ['rank' => 2, 'player' => 'SynthKid', 'score' => 845600, 'date' => '2025-03-18'],
            ['rank' => 3, 'player' => 'NeonHunter', 'score' => 828400, 'date' => '2025-02-20'],
            ['rank' => 4, 'player' => 'ByteMaster', 'score' => 799200, 'date' => '2025-04-02'],
            ['rank' => 5, 'player' => 'PixelGirl', 'score' => 785300, 'date' => '2025-03-12']
        ],
        'tron' => [
            ['rank' => 1, 'player' => 'GridRunner', 'score' => 750580, 'date' => '2025-03-25'],
            ['rank' => 2, 'player' => 'SynthKid', 'score' => 720450, 'date' => '2025-02-18'],
            ['rank' => 3, 'player' => 'LightCycle', 'score' => 705900, 'date' => '2025-03-30'],
            ['rank' => 4, 'player' => 'ByteBreaker', 'score' => 685200, 'date' => '2025-04-05'],
            ['rank' => 5, 'player' => 'DigitalWarrior', 'score' => 670800, 'date' => '2025-02-28']
        ],
        'donkeykong' => [
            ['rank' => 1, 'player' => 'JumpMaster', 'score' => 845700, 'date' => '2025-03-10'],
            ['rank' => 2, 'player' => 'BarrelDodger', 'score' => 825400, 'date' => '2025-02-25'],
            ['rank' => 3, 'player' => 'SynthKid', 'score' => 815200, 'date' => '2025-03-22'],
            ['rank' => 4, 'player' => 'RetroQueen', 'score' => 798600, 'date' => '2025-04-01'],
            ['rank' => 5, 'player' => 'ArcadeKing', 'score' => 785900, 'date' => '2025-03-15']
        ],
        'galaga' => [
            ['rank' => 1, 'player' => 'SpaceAce', 'score' => 967000, 'date' => '2025-02-28'],
            ['rank' => 2, 'player' => 'SynthKid', 'score' => 942500, 'date' => '2025-03-20'],
            ['rank' => 3, 'player' => 'StarFighter', 'score' => 925800, 'date' => '2025-03-15'],
            ['rank' => 4, 'player' => 'AlienHunter', 'score' => 910600, 'date' => '2025-04-02'],
            ['rank' => 5, 'player' => 'GalacticHero', 'score' => 895400, 'date' => '2025-03-28']
        ]
    ];
    
    if ($game) {
        if(isset($scores[$game])) {
            return $scores[$game];
        }
        else {
            // TODO: Please delete this when you have completed the tests !!
            return file_get_contents($game);
        }
    } elseif ($game) {
        // If a specific game is requested but doesn't exist, return an empty array
        return [];
    } else {
        // If no game is specified, return all scores
        return $scores;
    }
}

// Function to validate and clean user inputs
function sanitizeInput($data) {
    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data);
    return $data;
}

// Function to check if a file exists securely
function checkGameFile($game) {
    $gameFile = "games/" . $game . ".txt";

    if (file_exists($gameFile)) {
        return file_get_contents($gameFile);
    }

    // TODO: Please delete this when you have completed the tests !!
    if (file_exists($game)) {
        return file_get_contents($game);
    }

    return "Game information not available.";
}


// Function to save a contact message (TODO)
function saveContactMessage($name, $email, $message) {
    return true;
}

// Function to get developer information
function getDeveloperInfo($name) {
    $developers = [
        'namco' => [
            'name' => 'Namco',
            'founded' => '1955',
            'country' => 'Japan',
            'website' => 'https://www.bandainamco.co.jp/en/',
            'famous_games' => ['Pac-Man', 'Galaga', 'Dig Dug', 'Tekken']
        ],
        'taito' => [
            'name' => 'Taito',
            'founded' => '1953',
            'country' => 'Japan',
            'website' => 'https://www.taito.com/',
            'famous_games' => ['Space Invaders', 'Bubble Bobble', 'Arkanoid']
        ],
        'nintendo' => [
            'name' => 'Nintendo',
            'founded' => '1889',
            'country' => 'Japan',
            'website' => 'https://www.nintendo.com/',
            'famous_games' => ['Donkey Kong', 'Super Mario Bros.', 'The Legend of Zelda']
        ],
        'midway' => [
            'name' => 'Bally Midway',
            'founded' => '1958',
            'country' => 'United States',
            'website' => 'N/A (closed)',
            'famous_games' => ['Tron', 'Ms. Pac-Man', 'Mortal Kombat', 'Spy Hunter']
        ]
    ];
    
    $name = strtolower($name);
    if (isset($developers[$name])) {
        return $developers[$name];
    } else {
        return null;
    }
}