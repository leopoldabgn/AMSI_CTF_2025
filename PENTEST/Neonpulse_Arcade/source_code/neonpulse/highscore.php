<?php
$page_title = "Scores";
include('include/header.php');
include('include/functions.php');

$game = isset($_GET['game']) ? $_GET['game'] : 'pacman';

// Getting high scores
$scores = getHighScores($game);

// Getting additional information about the game
$game_info = checkGameFile($game);
?>

<h2 class="neon-text">High Scores Board</h2>

<div class="game-selection">
    <p>Select a game:</p>
    <div class="game-nav">
        <a href="highscore.php?game=pacman" class="<?php echo $game == 'pacman' ? 'active' : ''; ?>">Pac-Man</a>
        <a href="highscore.php?game=spaceinvaders" class="<?php echo $game == 'spaceinvaders' ? 'active' : ''; ?>">Space Invaders</a>
        <a href="highscore.php?game=tron" class="<?php echo $game == 'tron' ? 'active' : ''; ?>">Tron</a>
        <a href="highscore.php?game=donkeykong" class="<?php echo $game == 'donkeykong' ? 'active' : ''; ?>">Donkey Kong</a>
        <a href="highscore.php?game=galaga" class="<?php echo $game == 'galaga' ? 'active' : ''; ?>">Galaga</a>
    </div>
</div>

<?php if (empty($scores)): ?>
    <div class="alert">
        <p>No scores available for this game or game not recognized.</p>
    </div>
<?php else: ?>
    <div class="game-info neon-border">
        <h3 class="neon-text-cyan" style="margin-top:20px;"><?php echo ucfirst($game); ?> - Hall of Fame</h3>
        
        <!-- Display game information -->
        <?php if ($game_info && $game_info != "Game information not available."): ?>
            <div class="game-details">
                <p><?php echo $game_info; ?></p>
            </div>
        <?php endif; ?>
    </div>

    <table class="highscore-table">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Player</th>
                <th>Score</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody>
            <?php foreach($scores as $score): ?>
            <tr>
                <td><?php echo $score['rank']; ?></td>
                <td><?php echo $score['player']; ?></td>
                <td><?php echo number_format($score['score']); ?></td>
                <td><?php echo $score['date']; ?></td>
            </tr>
            <?php endforeach; ?>
        </tbody>
    </table>

    <div style="text-align: center; margin: 30px 0;">
        <a href="games.php" class="retro-btn">View all games</a>
    </div>
<?php endif; ?>

<div class="score-submission neon-border">
    <h3 class="neon-text">Submit a Score</h3>
    <p>Have you beaten a record? Submit your score for validation by our team!</p>
    
    <form action="#" method="post" class="score-form">
        <div class="form-group">
            <label for="player_name">Your username:</label>
            <input type="text" name="player_name" id="player_name" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="game_select">Game:</label>
            <select name="game_select" id="game_select" class="form-control" required>
                <option value="pacman">Pac-Man</option>
                <option value="spaceinvaders">Space Invaders</option>
                <option value="tron">Tron</option>
                <option value="donkeykong">Donkey Kong</option>
                <option value="galaga">Galaga</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="score">Score:</label>
            <input type="number" name="score" id="score" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="proof">Proof (link to screenshot):</label>
            <input type="url" name="proof" id="proof" class="form-control" required>
        </div>
        
        <button type="submit" class="retro-btn-cyan">Submit my score</button>
    </form>
</div>

<?php include('include/footer.php'); ?>